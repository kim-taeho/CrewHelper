{% extends "base.html" %}
{% load static %}
{% load on_favs check_apply %}

{% block page_title %}
    {{project.name}}
{% endblock page_title %}

{% block content %}
<style>
    .pro_zoom{}
    .pro_zoom:hover{transform:scale(1.05)}
</style>
    <div class="container mx-5 flex justify-around pb-56">
        <div class="w-1/2">
            <div class="flex justify-between">
                <div class="mr-8 mb-5">
                    <h4 class="text-3xl font-medium mb-px">{{project.name}}</h4>
                </div>
                
                <a href="{{project.host.get_absolute_url}}" class="flex flex-col items-center mr-1">
                    {% include "mixins/user_avatar.html" with user=project.host %}
                    <span class="mt-3 text-medium">{{project.host.first_name}}{{project.host.last_name}}</span>
                </a>

                {% for participant in participants %}
                    <a href="{{participant.user.get_absolute_url}}" class="flex flex-col items-center">
                        {% include "mixins/user_avatar.html" with user=participant.user %}
                        <span class="mt-3 text-medium">{{participant.user.first_name}}{{participant.user.last_name}}</span>
                    </a>
                {% endfor %}

            </div>

            <p class="border-b border-gray-400 pb-5 mt-5 font-bold">
                <i class="fas fa-users text-xl mr-3"></i>
                {{project.count_participants}}
                
                {% if project.on_market %}
                    <a href="{% url 'projects:toggle' project.pk %}" class="pro_zoom text-center ml-20 py-2 px-3 rounded-lg font-bold w-full text-black bg-green-400 hover:text-white-300"><i class="fas fa-ellipsis-h mr-2"></i>공고마감</a>
                {% else %}
                    <a href="{% url 'projects:toggle' project.pk %}" class="pro_zoom text-center ml-20 py-2 px-3 rounded-lg font-bold w-full text-black bg-yellow-500 hover:text-white-300"><i class="fas fa-share-alt mr-2"></i>공고등록</a>
                {% endif %}
                
            </p>
            
            
            <p class="border-b border-gray-400 pb-5 mt-5">
                {{project.description}}
            </p>

            <div class="mt-5 flex flex-row">
            </div>
                <form action="{% url 'projects:create-job' project.pk %}" method="POST" class="w-1/2">
                    {% csrf_token %}
                    {{form}}
                    <button class="pro_zoom text-center py-3 rounded-lg font-bold text-lg w-full text-white bg-teal-500 mt-5">업무 생성</button>
                </form>

            <div class="border-b border-gray-400 pb-5 mt-1 flex flex-row">
            </div>
                               
            <p class="border-b border-gray-400 pb-5 mt-5 pro_zoom">
                <a href="#" class="btn text-center py-3 px-4 rounded-lg font-medium text-lg w-full text-white bg-red-300 text-white hover:text-gray-300">프로젝트 종료</a>
            </p>         
        </div>

        <div>
            <h4 class="font-medium text-xl mb-5 w-15 mr-2">업 무</h4>
            {% for j in project_job %}
                <li class="mb-2 list-none ml-4 mb-6 border border-gray-600 rounded-lg w-full p-2">
                    <div class="mb-1 text-lg"><i class="fas fa-check-circle mr-2"></i>{{j.name}}</div>
                    <span class="mr-3"><i class="fas fa-user-check mr-2 ml-2 text-pink-400"></i>{{j.charger.first_name}}{{j.charger.last_name}}</span>
                    <span><i class="fas fa-calendar-day mr-2"></i>{{j.start}} ~ {{j.due}}</span>
                </li>
            {% endfor %} 
        </div>

    </div>
        
{% endblock content %}